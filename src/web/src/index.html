<canvas id="screen" width="256" height="240" style="width:512px;height:480px;"></canvas>
<br/>
<input type="checkbox" id="enable-audio" /><label for="enable-audio">Enabe Audio</label>
<script>
 (function(canvas, enable_audio) {
     var gfx_ctx = canvas.getContext('2d');
     function draw(screen) {
         var imgd = gfx_ctx.getImageData(0,0,256,240);
         var pix = imgd.data;
         for (var i = 0; i < pix.length; i++) {
             pix[i] = screen[i];
         }
         gfx_ctx.putImageData(imgd,0,0);
     }

     var audio_ctx = new (window.AudioContext || window.webkitAudioContext)();
     function play(samples) {
         var buf = audio_ctx.createBuffer(1, samples.length, samples.length * 60);
         var data = buf.getChannelData(0);
         for (var i = 0; i < samples.length; i++) {
             data[i] = samples[i];
         }

         var source = audio_ctx.createBufferSource();
         source.buffer = buf;
         source.connect(audio_ctx.destination);

         source.start();
     }

     var worker = new Worker('main.js');
     worker.onmessage = function(e) {
         if(e.data.screen) {
             draw(e.data.screen);
         }
         if(e.data.audio && enable_audio.checked) {
             play(e.data.audio);
         }
     }
 })(document.getElementById('screen'), document.getElementById('enable-audio'));
</script>
<p>
    This will run VERY slow. There is no input controls, and it is written in a VERY hacky way.
    <a href="https://github.com/nickmass/mass-nes/tree/master/src/web">Code</a>
</p>
